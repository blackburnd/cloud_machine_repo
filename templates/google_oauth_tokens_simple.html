{% extends "base.html" %}

{% block title %}Google OAuth Tokens{% endblock %}

{% block content %}
<div style="max-width: 1400px; margin: 0 auto; padding: 20px;">
    <h1>Google OAuth Tokens</h1>
    
    {% if tokens %}
    <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
        <thead>
            <tr style="background: #f5f5f5;">
                <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Admin Email</th>
                <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Access Token</th>
                <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Refresh Token</th>
                <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Scopes</th>
                <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Expires</th>
                <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Active</th>
                <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Created</th>
            </tr>
        </thead>
        <tbody>
            {% for token in tokens %}
            <tr>
                <td style="padding: 10px; border: 1px solid #ddd;">{{ token.admin_email }}</td>
                <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; font-size: 12px; max-width: 200px; word-break: break-all;">
                    {{ token.access_token[:50] }}...
                </td>
                <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; font-size: 12px; max-width: 200px; word-break: break-all;">
                    {% if token.refresh_token %}{{ token.refresh_token[:50] }}...{% else %}None{% endif %}
                </td>
                <td style="padding: 10px; border: 1px solid #ddd; font-size: 12px; max-width: 300px;">
                    {{ token.granted_scopes }}
                </td>
                <td style="padding: 10px; border: 1px solid #ddd; font-size: 12px;">
                    {% if token.token_expires_at %}{{ token.token_expires_at.strftime('%Y-%m-%d %H:%M') }}{% else %}No expiry{% endif %}
                </td>
                <td style="padding: 10px; border: 1px solid #ddd;">
                    {% if token.is_active %}Active{% else %}Inactive{% endif %}
                </td>
                <td style="padding: 10px; border: 1px solid #ddd; font-size: 12px;">
                    {{ token.created_at.strftime('%Y-%m-%d %H:%M') }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No Google OAuth tokens found.</p>
    {% endif %}
</div>
{% endblock %}
